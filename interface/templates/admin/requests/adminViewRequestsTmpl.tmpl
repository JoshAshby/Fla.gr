#extends views.admin.adminSkeleton

#def leftExtra
<div class="tabbable tabs-left">
    <ul class="nav nav-tabs" id="sidebarTabs">
        <li class="active"><a href="#all"><i class="icon-info-sign"></i> All</a></li>
        <li><a href="#settings"><i class="icon-cog"></i> Settings</a></li>
    </ul>
    <b class="muted">Selected</b>
    <a href="#" id="grantButton" style="margin-top:10px; margin-left:10px" class="btn btn-primary"><i class="icon-ok"></i> Grant</a>
    <a href="#" id="deleteButton" style="margin-top:10px; margin-left:10px" class="btn btn-inverse"><i class="icon-trash"></i> Delete</a>
</div>
#end def

#def body
<ul class="breadcrumb">
    You are here:<span class="divider"></span>
    <li><a href="/admin">Admin Panel</a> <span class="divider">/</span></li>
    <li class="active">Requests</li>
</ul>
<div class="tab-content">
    <div class="tab-pane active" id="all">
        <table class="table table-striped table-condensed">
            <thead>
                <tr>
                    <th><button type="button" id="bulkCheckButton"class="btn btn-mini" data-toggle="button"><i class="icon-check-empty"></i></button></th>
                    <th>Email</th>
                    <th>Requested</th>
                    <th>Granted</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
            #for $request in $requests
                <tr>
                    <td><input type="checkbox" value="$request.id" class="bulkCheckbox"></td>
                    <td>$request.email</td>
                    <td>$request.formatedCreated</td>
                    <td>
                        #if $request.granted
                            <span class="label lable-success">$request.formatedGranted</span>
                        #else
                            <span class="label label-inverse">New</span>
                        #end if
                    </td>
                    <td>
                        <div class="btn-group">
                            <button class="btn btn-primary btn-small requestGrantButton" data-id="$request.id" data-email="$request.email"><i class="icon-ok"></i> Grant</button>
                            <button class="btn btn-inverse btn-small requestDeleteButton" data-id="$request.id" data-email="$request.email"><i class="icon-trash"></i></button>
                        </div>
                    </td>
                </tr>
            #end for
            </tbody>
        </table>
    </div>
    <div class="tab-pane" id="settings">
        <form class="form form-horizontal" action="/admin/requests/settings" method="POST">
            <div class="control-group">
                <label class="control-label">Template for emails: </label>
                <div class="controls">
                    <select name="tmplid">
                        #for $tmpl in $tmpls
                            <option value="$tmpl.id" #if $tmpl.current#selected#end if#>$tmpl.name</option>
                        #end for
                    </select>
                </div>
            </div>
            <div class="form-actions">
                <button type="submit" class="btn btn-primary"><i class="icon-save"></i> Save Settings</button>
            </div>
        </form>
    </div>
</div>
#end def
